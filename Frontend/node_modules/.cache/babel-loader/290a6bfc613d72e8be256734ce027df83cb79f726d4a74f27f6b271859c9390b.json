{"ast":null,"code":"import { isSVGElement } from '../utils/is-svg-element.mjs';\nimport { resolveElements } from '../utils/resolve-elements.mjs';\nconst resizeHandlers = new WeakMap();\nlet observer;\nconst getSize = (borderBoxAxis, svgAxis, htmlAxis) => (target, borderBoxSize) => {\n  if (borderBoxSize && borderBoxSize[0]) {\n    return borderBoxSize[0][borderBoxAxis + \"Size\"];\n  } else if (isSVGElement(target) && \"getBBox\" in target) {\n    return target.getBBox()[svgAxis];\n  } else {\n    return target[htmlAxis];\n  }\n};\nconst getWidth = /*@__PURE__*/getSize(\"inline\", \"width\", \"offsetWidth\");\nconst getHeight = /*@__PURE__*/getSize(\"block\", \"height\", \"offsetHeight\");\nfunction notifyTarget({\n  target,\n  borderBoxSize\n}) {\n  resizeHandlers.get(target)?.forEach(handler => {\n    handler(target, {\n      get width() {\n        return getWidth(target, borderBoxSize);\n      },\n      get height() {\n        return getHeight(target, borderBoxSize);\n      }\n    });\n  });\n}\nfunction notifyAll(entries) {\n  entries.forEach(notifyTarget);\n}\nfunction createResizeObserver() {\n  if (typeof ResizeObserver === \"undefined\") return;\n  observer = new ResizeObserver(notifyAll);\n}\nfunction resizeElement(target, handler) {\n  if (!observer) createResizeObserver();\n  const elements = resolveElements(target);\n  elements.forEach(element => {\n    let elementHandlers = resizeHandlers.get(element);\n    if (!elementHandlers) {\n      elementHandlers = new Set();\n      resizeHandlers.set(element, elementHandlers);\n    }\n    elementHandlers.add(handler);\n    observer?.observe(element);\n  });\n  return () => {\n    elements.forEach(element => {\n      const elementHandlers = resizeHandlers.get(element);\n      elementHandlers?.delete(handler);\n      if (!elementHandlers?.size) {\n        observer?.unobserve(element);\n      }\n    });\n  };\n}\nexport { resizeElement };","map":{"version":3,"names":["resizeHandlers","WeakMap","observer","getSize","borderBoxAxis","svgAxis","htmlAxis","target","borderBoxSize","isSVGElement","getBBox","getWidth","getHeight","notifyTarget","get","forEach","handler","width","height","notifyAll","entries","createResizeObserver","ResizeObserver","resizeElement","elements","resolveElements","element","elementHandlers","Set","set","add","observe","delete","size","unobserve"],"sources":["/home/zeinab/ziblog/Frontend/node_modules/motion-dom/src/resize/handle-element.ts"],"sourcesContent":["import { isSVGElement } from \"../utils/is-svg-element\"\nimport { ElementOrSelector, resolveElements } from \"../utils/resolve-elements\"\nimport { ResizeHandler } from \"./types\"\n\nconst resizeHandlers = new WeakMap<Element, Set<ResizeHandler<Element>>>()\n\nlet observer: ResizeObserver | undefined\n\nconst getSize =\n    (\n        borderBoxAxis: \"inline\" | \"block\",\n        svgAxis: \"width\" | \"height\",\n        htmlAxis: \"offsetWidth\" | \"offsetHeight\"\n    ) =>\n    (target: Element, borderBoxSize?: ReadonlyArray<ResizeObserverSize>) => {\n        if (borderBoxSize && borderBoxSize[0]) {\n            return borderBoxSize[0][\n                (borderBoxAxis + \"Size\") as keyof ResizeObserverSize\n            ]\n        } else if (isSVGElement(target) && \"getBBox\" in target) {\n            return (target as SVGGraphicsElement).getBBox()[svgAxis]\n        } else {\n            return (target as HTMLElement)[htmlAxis]\n        }\n    }\n\nconst getWidth = /*@__PURE__*/ getSize(\"inline\", \"width\", \"offsetWidth\")\nconst getHeight = /*@__PURE__*/ getSize(\"block\", \"height\", \"offsetHeight\")\n\nfunction notifyTarget({ target, borderBoxSize }: ResizeObserverEntry) {\n    resizeHandlers.get(target)?.forEach((handler) => {\n        handler(target, {\n            get width() {\n                return getWidth(target, borderBoxSize)\n            },\n            get height() {\n                return getHeight(target, borderBoxSize)\n            },\n        })\n    })\n}\n\nfunction notifyAll(entries: ResizeObserverEntry[]) {\n    entries.forEach(notifyTarget)\n}\n\nfunction createResizeObserver() {\n    if (typeof ResizeObserver === \"undefined\") return\n\n    observer = new ResizeObserver(notifyAll)\n}\n\nexport function resizeElement(\n    target: ElementOrSelector,\n    handler: ResizeHandler<Element>\n) {\n    if (!observer) createResizeObserver()\n\n    const elements = resolveElements(target)\n\n    elements.forEach((element) => {\n        let elementHandlers = resizeHandlers.get(element)\n\n        if (!elementHandlers) {\n            elementHandlers = new Set()\n            resizeHandlers.set(element, elementHandlers)\n        }\n\n        elementHandlers.add(handler)\n        observer?.observe(element)\n    })\n\n    return () => {\n        elements.forEach((element) => {\n            const elementHandlers = resizeHandlers.get(element)\n\n            elementHandlers?.delete(handler)\n\n            if (!elementHandlers?.size) {\n                observer?.unobserve(element)\n            }\n        })\n    }\n}\n"],"mappings":";;AAIA,MAAMA,cAAc,GAAG,IAAIC,OAAO,EAAwC;AAE1E,IAAIC,QAAoC;AAExC,MAAMC,OAAO,GACTA,CACIC,aAAiC,EACjCC,OAA2B,EAC3BC,QAAwC,KAE5C,CAACC,MAAe,EAAEC,aAAiD,KAAI;EACnE,IAAIA,aAAa,IAAIA,aAAa,CAAC,CAAC,CAAC,EAAE;IACnC,OAAOA,aAAa,CAAC,CAAC,CAAC,CAClBJ,aAAa,GAAG,MAAM,CAC1B;GACJ,MAAM,IAAIK,YAAY,CAACF,MAAM,CAAC,IAAI,SAAS,IAAIA,MAAM,EAAE;IACpD,OAAQA,MAA6B,CAACG,OAAO,EAAE,CAACL,OAAO,CAAC;GAC3D,MAAM;IACH,OAAQE,MAAsB,CAACD,QAAQ,CAAC;;AAEhD,CAAC;AAEL,MAAMK,QAAQ,gBAAiBR,OAAO,CAAC,QAAQ,EAAE,OAAO,EAAE,aAAa,CAAC;AACxE,MAAMS,SAAS,gBAAiBT,OAAO,CAAC,OAAO,EAAE,QAAQ,EAAE,cAAc,CAAC;AAE1E,SAASU,YAAYA,CAAC;EAAEN,MAAM;EAAEC;AAAa,CAAuB;EAChER,cAAc,CAACc,GAAG,CAACP,MAAM,CAAC,EAAEQ,OAAO,CAAEC,OAAO,IAAI;IAC5CA,OAAO,CAACT,MAAM,EAAE;MACZ,IAAIU,KAAKA,CAAA;QACL,OAAON,QAAQ,CAACJ,MAAM,EAAEC,aAAa,CAAC;OACzC;MACD,IAAIU,MAAMA,CAAA;QACN,OAAON,SAAS,CAACL,MAAM,EAAEC,aAAa,CAAC;;IAE9C,EAAC;EACN,CAAC,CAAC;AACN;AAEA,SAASW,SAASA,CAACC,OAA8B;EAC7CA,OAAO,CAACL,OAAO,CAACF,YAAY,CAAC;AACjC;AAEA,SAASQ,oBAAoBA,CAAA;EACzB,IAAI,OAAOC,cAAc,KAAK,WAAW,EAAE;EAE3CpB,QAAQ,GAAG,IAAIoB,cAAc,CAACH,SAAS,CAAC;AAC5C;AAEgB,SAAAI,aAAaA,CACzBhB,MAAyB,EACzBS,OAA+B;EAE/B,IAAI,CAACd,QAAQ,EAAEmB,oBAAoB,EAAE;EAErC,MAAMG,QAAQ,GAAGC,eAAe,CAAClB,MAAM,CAAC;EAExCiB,QAAQ,CAACT,OAAO,CAAEW,OAAO,IAAI;IACzB,IAAIC,eAAe,GAAG3B,cAAc,CAACc,GAAG,CAACY,OAAO,CAAC;IAEjD,IAAI,CAACC,eAAe,EAAE;MAClBA,eAAe,GAAG,IAAIC,GAAG,EAAE;MAC3B5B,cAAc,CAAC6B,GAAG,CAACH,OAAO,EAAEC,eAAe,CAAC;;IAGhDA,eAAe,CAACG,GAAG,CAACd,OAAO,CAAC;IAC5Bd,QAAQ,EAAE6B,OAAO,CAACL,OAAO,CAAC;EAC9B,CAAC,CAAC;EAEF,OAAO,MAAK;IACRF,QAAQ,CAACT,OAAO,CAAEW,OAAO,IAAI;MACzB,MAAMC,eAAe,GAAG3B,cAAc,CAACc,GAAG,CAACY,OAAO,CAAC;MAEnDC,eAAe,EAAEK,MAAM,CAAChB,OAAO,CAAC;MAEhC,IAAI,CAACW,eAAe,EAAEM,IAAI,EAAE;QACxB/B,QAAQ,EAAEgC,SAAS,CAACR,OAAO,CAAC;;IAEpC,CAAC,CAAC;EACN,CAAC;AACL","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}